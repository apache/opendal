"use strict";(globalThis.webpackChunkopendal_website=globalThis.webpackChunkopendal_website||[]).push([[5704],{288(e,n,s){s.d(n,{R:()=>t,x:()=>l});var a=s(6363);const i={},r=a.createContext(i);function t(e){const n=a.useContext(r);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),a.createElement(r.Provider,{value:n},e.children)}},9189(e,n,s){s.r(n),s.d(n,{assets:()=>h,contentTitle:()=>c,default:()=>g,frontMatter:()=>d,metadata:()=>a,toc:()=>p});const a=JSON.parse('{"id":"bindings/java","title":"Java","description":"","source":"@site/docs/20-bindings/java.mdx","sourceDirName":"20-bindings","slug":"/bindings/java","permalink":"/bindings/java","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/opendal/tree/main/website/docs/20-bindings/java.mdx","tags":[],"version":"current","lastUpdatedBy":"Xuanwo","lastUpdatedAt":1741601725000,"frontMatter":{"title":"Java"},"sidebar":"docs","previous":{"title":"Haskell \ud83d\udea7","permalink":"/bindings/haskell"},"next":{"title":"Lua \ud83d\udea7","permalink":"/bindings/lua"}}');var i=s(7259),r=s(288),t=s(9860);function l(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"apache-opendal-java-bindings",children:"Apache OpenDAL\u2122 Java Bindings"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.a,{href:"https://central.sonatype.com/search?q=opendal&smo=true",children:(0,i.jsx)(n.img,{src:"/img/external/6fc9234a805e6983d9cc27a62c8568aa.svg",alt:""})}),"\n",(0,i.jsx)(n.a,{href:"https://central.sonatype.com/search?q=opendal&smo=true",children:(0,i.jsx)(n.img,{src:"/img/external/11f3ee113877f72b02fab00aae6b1a41.svg",alt:"Maven Central"})}),"\n",(0,i.jsx)(n.a,{href:"https://opendal.apache.org/docs/java/",children:(0,i.jsx)(n.img,{src:"/img/external/0331140e6c28f97a21906ae8f1b0117b.svg",alt:"Website"})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"https://github.com/apache/opendal/assets/5351546/87bbf6e5-f19e-449a-b368-3e283016c887",alt:""})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": This binding has its own independent version number, which may differ from the Rust core version. When checking for updates or compatibility, always refer to this binding's version rather than the core version."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"useful-links",children:"Useful Links"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://opendal.apache.org/docs/java/",children:"Documentation"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"./upgrade.md",children:"Upgrade Guide"})}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'import java.util.HashMap;\nimport java.util.Map;\nimport org.apache.opendal.AsyncOperator;\nimport org.apache.opendal.Operator;\n\npublic class Main {\n  public static void main(String[] args) {\n    final Map<String, String> conf = new HashMap<>();\n    conf.put("root", "/tmp");\n\n    try (AsyncOperator op = AsyncOperator.of("fs", conf)) {\n      op.write("/path/to/data", "Hello world").join();\n      System.out.println(new String(op.read("/path/to/data").join()));\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"getting-started",children:"Getting Started"}),"\n",(0,i.jsx)(n.p,{children:"This project is built upon the native OpenDAL lib. And it is released for multiple platforms that you can use a classifier to specify the platform you are building the application on."}),"\n",(0,i.jsx)(n.h3,{id:"maven",children:"Maven"}),"\n",(0,i.jsxs)(n.p,{children:["Generally, you can first add the ",(0,i.jsx)(n.code,{children:"os-maven-plugin"})," for automatically detect the classifier based on your platform:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:"<build>\n<extensions>\n  <extension>\n    <groupId>kr.motd.maven</groupId>\n    <artifactId>os-maven-plugin</artifactId>\n    <version>1.7.0</version>\n  </extension>\n</extensions>\n</build>\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Then add the dependency to ",(0,i.jsx)(n.code,{children:"opendal"})," as following:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:"<dependencies>\n  <dependency>\n    <groupId>org.apache.opendal</groupId>\n    <artifactId>opendal</artifactId>\n    <version>${opendal.version}</version>\n  </dependency>\n  <dependency>\n    <groupId>org.apache.opendal</groupId>\n    <artifactId>opendal</artifactId>\n    <version>${opendal.version}</version>\n    <classifier>${os.detected.classifier}</classifier>\n  </dependency>\n</dependencies>\n"})}),"\n",(0,i.jsx)(n.h3,{id:"gradle",children:"Gradle"}),"\n",(0,i.jsxs)(n.p,{children:["For Gradle, you can first add the ",(0,i.jsx)(n.code,{children:"com.google.osdetector"})," for automatically detect the classifier based on your platform:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-groovy",children:'plugins {\n    id "com.google.osdetector" version "1.7.3"\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"Then add the dependency to `opendal as following:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-groovy",children:'dependencies {\n    implementation "org.apache.opendal:opendal:$opendalVersion"\n    implementation "org.apache.opendal:opendal:$opendalVersion:$osdetector.classifier"\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"classified-library",children:"Classified library"}),"\n",(0,i.jsx)(n.p,{children:'Note that the dependency without classifier ships all classes and resources except the "opendal_java" shared library. And those with classifier bundle only the shared library.'}),"\n",(0,i.jsx)(n.p,{children:"For downstream usage, it's recommended:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Depend on the one without classifier to write code;"}),"\n",(0,i.jsx)(n.li,{children:'Depend on the classified ones with "test" for testing.'}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"To load the shared library correctly, you can choose one of the following approaches:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Append the classified JARs to the classpath at the runtime;"}),"\n",(0,i.jsx)(n.li,{children:"Depend on the classified JARs and build a fat JAR (You may need to depend on all the provided classified JARs for running on multiple platforms);"}),"\n",(0,i.jsx)(n.li,{children:'Build your own "opendal_java" shared library and specify "-Djava.library.path" to the folder containing that shared library.'}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"build",children:"Build"}),"\n",(0,i.jsxs)(n.p,{children:["This project provides OpenDAL Java bindings with artifact name ",(0,i.jsx)(n.code,{children:"opendal"}),". It depends on JDK 8 or later."]}),"\n",(0,i.jsx)(n.p,{children:"You can use Maven to build both Rust dynamic lib and JAR files with one command now:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"./mvnw clean package -DskipTests=true\n"})}),"\n",(0,i.jsx)(n.h2,{id:"run-tests",children:"Run tests"}),"\n",(0,i.jsx)(n.p,{children:"Currently, all tests are written in Java."}),"\n",(0,i.jsx)(n.p,{children:"You can run the base tests with the following command:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"./mvnw clean verify\n"})}),"\n",(0,i.jsx)(n.h2,{id:"code-style",children:"Code style"}),"\n",(0,i.jsxs)(n.p,{children:["This project uses ",(0,i.jsx)(n.a,{href:"https://github.com/diffplug/spotless",children:"spotless"})," for code formatting so that all developers share a consistent code style without bikeshedding on it."]}),"\n",(0,i.jsx)(n.p,{children:"You can apply the code style with the following command::"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"./mvnw spotless:apply\n"})}),"\n",(0,i.jsx)(n.h2,{id:"run-behavior-tests",children:"Run behavior tests"}),"\n",(0,i.jsxs)(n.p,{children:["Services behavior tests read necessary configs from env vars or the ",(0,i.jsx)(n.code,{children:".env"})," file."]}),"\n",(0,i.jsxs)(n.p,{children:["You can copy ",(0,i.jsx)(n.a,{href:"/.env.example",children:".env.example"})," to ",(0,i.jsx)(n.code,{children:"${project.rootdir}/.env"})," and change the values on need, or directly set env vars with ",(0,i.jsx)(n.code,{children:"export KEY=VALUE"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Take ",(0,i.jsx)(n.code,{children:"fs"})," for example, we need to enable bench on ",(0,i.jsx)(n.code,{children:"fs"})," on ",(0,i.jsx)(n.code,{children:"/tmp/"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-properties",children:"OPENDAL_TEST=fs\nOPENDAL_FS_ROOT=/tmp/\n"})}),"\n",(0,i.jsx)(n.p,{children:"You can run service behavior tests of enabled with the following command:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:'./mvnw test -Dtest="behavior.*Test"\n'})}),"\n",(0,i.jsx)(n.h2,{id:"used-by",children:"Used by"}),"\n",(0,i.jsxs)(n.p,{children:["Check out the ",(0,i.jsx)(n.a,{href:"./users.md",children:"users"})," list for more details on who is using OpenDAL."]}),"\n",(0,i.jsx)(n.h2,{id:"license-and-trademarks",children:"License and Trademarks"}),"\n",(0,i.jsxs)(n.p,{children:["Licensed under the Apache License, Version 2.0: ",(0,i.jsx)(n.a,{href:"http://www.apache.org/licenses/LICENSE-2.0",children:"http://www.apache.org/licenses/LICENSE-2.0"})]}),"\n",(0,i.jsx)(n.p,{children:"Apache OpenDAL, OpenDAL, and Apache are either registered trademarks or trademarks of the Apache Software Foundation."})]})}function o(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}const d={title:"Java"},c=void 0,h={},p=[{value:"Useful Links",id:"useful-links",level:2},{value:"Example",id:"example",level:2},{value:"Getting Started",id:"getting-started",level:2},{value:"Maven",id:"maven",level:3},{value:"Gradle",id:"gradle",level:3},{value:"Classified library",id:"classified-library",level:3},{value:"Build",id:"build",level:2},{value:"Run tests",id:"run-tests",level:2},{value:"Code style",id:"code-style",level:2},{value:"Run behavior tests",id:"run-behavior-tests",level:2},{value:"Used by",id:"used-by",level:2},{value:"License and Trademarks",id:"license-and-trademarks",level:2}];function u(e){return(0,i.jsx)(t.A,{basePath:"bindings/java/",children:(0,i.jsx)(o,{components:{h1:"h2"}})})}function g(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(u,{...e})}):u()}},9860(e,n,s){s.d(n,{A:()=>r});var a=s(6363),i=s(7259);function r({children:e,owner:n="apache",repo:s="opendal",branch:r="main",basePath:t="",components:l={}}){const o=e=>{const a=e.replace(/^\.\//,"");return`https://github.com/${n}/${s}/blob/${r}/${t}${a}`},d={...l,a:e=>{const{href:n,...s}=e;return n&&n.startsWith("./")?(0,i.jsx)("a",{...s,href:o(n)}):(0,i.jsx)("a",{...e})},p:e=>{const{children:n}=e;if("string"==typeof n){const e=/\[(.*?)\]:\s*(\.\/[^\s]+)/g;if(e.test(n)){const s=n.replace(e,(e,n,s)=>`[${n}]: ${o(s)}`);return(0,i.jsx)("p",{children:s})}}return(0,i.jsx)("p",{...e})}};return"string"==typeof e?(e=>{if("string"!=typeof e)return e;let n=e.replace(/\[(.*?)\]\((\.\/[^)]+)\)/g,(e,n,s)=>`[${n}](${o(s)})`);return n=n.replace(/\[(.*?)\]:\s*(\.\/[^\s]+)/g,(e,n,s)=>`[${n}]: ${o(s)}`),n})(e):a.isValidElement(e)?a.cloneElement(e,{components:{...e.props.components||{},...d}}):e}}}]);