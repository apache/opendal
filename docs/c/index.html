<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=11">
<meta name="generator" content="Doxygen 1.9.8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Apache OpenDAL™ C Binding: Apache OpenDAL™ C Binding (WIP)</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css">
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Apache OpenDAL™ C Binding
   </div>
   <div id="projectbrief">The C binding for Apache OpenDAL™</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow" onmouseover="return searchBox.OnSearchSelectShow()" onmouseout="return searchBox.OnSearchSelectHide()" onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Apache OpenDAL™ C Binding (WIP) </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a> <a href="https://opendal.apache.org/bindings/c/"><img src="/img/external/552ab0d9376d217ab2e8b0ade233afb8.svg" alt="" class="inline"></a></p>
<p><img src="/img/external/9a183ec0ae8ab600b6baceb2c70a2367.jpg" alt="" class="inline"></p>
<blockquote class="doxtable">
<p>‍<b>Note</b>: This binding has its own independent version number, which may differ from the Rust core version. When checking for updates or compatibility, always refer to this binding's version rather than the core version. </p>
</blockquote>
<h1><a class="anchor" id="autotoc_md47"></a>
Example</h1>
<p>A simple read and write example</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include "assert.h"</span></div>
<div class="line"><span class="preprocessor">#include "<a class="code" href="opendal_8h.html">opendal.h</a>"</span></div>
<div class="line"><span class="preprocessor">#include "stdio.h"</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    <span class="comment">/* Initialize a operator for "memory" backend, with no options */</span></div>
<div class="line">    <a class="code hl_struct" href="structopendal__result__operator__new.html">opendal_result_operator_new</a> result = <a class="code hl_function" href="opendal_8h.html#a3b32f655689a122d2b6feff169fac442">opendal_operator_new</a>(<span class="stringliteral">"memory"</span>, 0);</div>
<div class="line">    assert(result.<a class="code hl_variable" href="structopendal__result__operator__new.html#a4e358aad13b4c71dc7a9a812191371c6">op</a> != NULL);</div>
<div class="line">    assert(result.<a class="code hl_variable" href="structopendal__result__operator__new.html#a5ee50d6c74038806e57d12d1880ac520">error</a> == NULL);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_struct" href="structopendal__operator.html">opendal_operator</a>* op = result.<a class="code hl_variable" href="structopendal__result__operator__new.html#a4e358aad13b4c71dc7a9a812191371c6">op</a>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Prepare some data to be written */</span></div>
<div class="line">    <a class="code hl_struct" href="structopendal__bytes.html">opendal_bytes</a> data = {</div>
<div class="line">        .<a class="code hl_variable" href="structopendal__bytes.html#a935f1136d26c36261920197f205cc35c">data</a> = (uint8_t*)<span class="stringliteral">"this_string_length_is_24"</span>,</div>
<div class="line">        .len = 24,</div>
<div class="line">    };</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Write this into path "/testpath" */</span></div>
<div class="line">    <a class="code hl_struct" href="structopendal__error.html">opendal_error</a> *error = <a class="code hl_function" href="opendal_8h.html#a0514188e04a2780293ef39b30ba22764">opendal_operator_write</a>(op, <span class="stringliteral">"/testpath"</span>, &amp;data);</div>
<div class="line">    assert(error == NULL);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* We can read it out, make sure the data is the same */</span></div>
<div class="line">    <a class="code hl_struct" href="structopendal__result__read.html">opendal_result_read</a> r = <a class="code hl_function" href="opendal_8h.html#ab1419180b377316e27416b742bcc059f">opendal_operator_read</a>(op, <span class="stringliteral">"/testpath"</span>);</div>
<div class="line">    <a class="code hl_struct" href="structopendal__bytes.html">opendal_bytes</a> read_bytes = r.<a class="code hl_variable" href="structopendal__result__read.html#a1028a16cc39b26b4a02f36c24c41b26e">data</a>;</div>
<div class="line">    assert(r.<a class="code hl_variable" href="structopendal__result__read.html#a6cd0e4e83ed4509856de0d1e6b83e2f2">error</a> == NULL);</div>
<div class="line">    assert(read_bytes.<a class="code hl_variable" href="structopendal__bytes.html#a16abed2ad211c076650d1ea81772b851">len</a> == 24);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Lets print it out */</span></div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 24; ++i) {</div>
<div class="line">        printf(<span class="stringliteral">"%c"</span>, read_bytes.<a class="code hl_variable" href="structopendal__bytes.html#a935f1136d26c36261920197f205cc35c">data</a>[i]);</div>
<div class="line">    }</div>
<div class="line">    printf(<span class="stringliteral">"\n"</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* the opendal_bytes read is heap allocated, please free it */</span></div>
<div class="line">    <a class="code hl_function" href="opendal_8h.html#aea5253c2bbe9438349eebb68a18a82ea">opendal_bytes_free</a>(&amp;read_bytes);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* the operator_ptr is also heap allocated */</span></div>
<div class="line">    <a class="code hl_function" href="opendal_8h.html#a1169eec9af043fb6e8212bee4f47824e">opendal_operator_free</a>(&amp;op);</div>
<div class="line">}</div>
<div class="ttc" id="aopendal_8h_html"><div class="ttname"><a href="opendal_8h.html">opendal.h</a></div></div>
<div class="ttc" id="aopendal_8h_html_a0514188e04a2780293ef39b30ba22764"><div class="ttname"><a href="opendal_8h.html#a0514188e04a2780293ef39b30ba22764">opendal_operator_write</a></div><div class="ttdeci">struct opendal_error * opendal_operator_write(const struct opendal_operator *op, const char *path, const struct opendal_bytes *bytes)</div><div class="ttdoc">Blocking write raw bytes to path.</div></div>
<div class="ttc" id="aopendal_8h_html_a1169eec9af043fb6e8212bee4f47824e"><div class="ttname"><a href="opendal_8h.html#a1169eec9af043fb6e8212bee4f47824e">opendal_operator_free</a></div><div class="ttdeci">void opendal_operator_free(const struct opendal_operator *ptr)</div><div class="ttdoc">Free the heap-allocated operator pointed by opendal_operator.</div></div>
<div class="ttc" id="aopendal_8h_html_a3b32f655689a122d2b6feff169fac442"><div class="ttname"><a href="opendal_8h.html#a3b32f655689a122d2b6feff169fac442">opendal_operator_new</a></div><div class="ttdeci">struct opendal_result_operator_new opendal_operator_new(const char *scheme, const struct opendal_operator_options *options)</div><div class="ttdoc">Construct an operator based on scheme and options</div></div>
<div class="ttc" id="aopendal_8h_html_ab1419180b377316e27416b742bcc059f"><div class="ttname"><a href="opendal_8h.html#ab1419180b377316e27416b742bcc059f">opendal_operator_read</a></div><div class="ttdeci">struct opendal_result_read opendal_operator_read(const struct opendal_operator *op, const char *path)</div><div class="ttdoc">Blocking read the data from path.</div></div>
<div class="ttc" id="aopendal_8h_html_aea5253c2bbe9438349eebb68a18a82ea"><div class="ttname"><a href="opendal_8h.html#aea5253c2bbe9438349eebb68a18a82ea">opendal_bytes_free</a></div><div class="ttdeci">void opendal_bytes_free(struct opendal_bytes *ptr)</div><div class="ttdoc">Frees the heap memory used by the opendal_bytes.</div></div>
<div class="ttc" id="astructopendal__bytes_html"><div class="ttname"><a href="structopendal__bytes.html">opendal_bytes</a></div><div class="ttdoc">opendal_bytes carries raw-bytes with its length</div><div class="ttdef"><b>Definition</b> opendal.h:101</div></div>
<div class="ttc" id="astructopendal__bytes_html_a16abed2ad211c076650d1ea81772b851"><div class="ttname"><a href="structopendal__bytes.html#a16abed2ad211c076650d1ea81772b851">opendal_bytes::len</a></div><div class="ttdeci">uintptr_t len</div><div class="ttdef"><b>Definition</b> opendal.h:109</div></div>
<div class="ttc" id="astructopendal__bytes_html_a935f1136d26c36261920197f205cc35c"><div class="ttname"><a href="structopendal__bytes.html#a935f1136d26c36261920197f205cc35c">opendal_bytes::data</a></div><div class="ttdeci">uint8_t * data</div><div class="ttdef"><b>Definition</b> opendal.h:105</div></div>
<div class="ttc" id="astructopendal__error_html"><div class="ttname"><a href="structopendal__error.html">opendal_error</a></div><div class="ttdoc">The opendal error type for C binding, containing an error code and corresponding error message.</div><div class="ttdef"><b>Definition</b> opendal.h:135</div></div>
<div class="ttc" id="astructopendal__operator_html"><div class="ttname"><a href="structopendal__operator.html">opendal_operator</a></div><div class="ttdoc">Used to access almost all OpenDAL APIs. It represents an operator that provides the unified interface...</div><div class="ttdef"><b>Definition</b> opendal.h:223</div></div>
<div class="ttc" id="astructopendal__result__operator__new_html"><div class="ttname"><a href="structopendal__result__operator__new.html">opendal_result_operator_new</a></div><div class="ttdoc">The result type returned by opendal_operator_new() operation.</div><div class="ttdef"><b>Definition</b> opendal.h:243</div></div>
<div class="ttc" id="astructopendal__result__operator__new_html_a4e358aad13b4c71dc7a9a812191371c6"><div class="ttname"><a href="structopendal__result__operator__new.html#a4e358aad13b4c71dc7a9a812191371c6">opendal_result_operator_new::op</a></div><div class="ttdeci">struct opendal_operator * op</div><div class="ttdef"><b>Definition</b> opendal.h:247</div></div>
<div class="ttc" id="astructopendal__result__operator__new_html_a5ee50d6c74038806e57d12d1880ac520"><div class="ttname"><a href="structopendal__result__operator__new.html#a5ee50d6c74038806e57d12d1880ac520">opendal_result_operator_new::error</a></div><div class="ttdeci">struct opendal_error * error</div><div class="ttdef"><b>Definition</b> opendal.h:251</div></div>
<div class="ttc" id="astructopendal__result__read_html"><div class="ttname"><a href="structopendal__result__read.html">opendal_result_read</a></div><div class="ttdoc">The result type returned by opendal's read operation.</div><div class="ttdef"><b>Definition</b> opendal.h:280</div></div>
<div class="ttc" id="astructopendal__result__read_html_a1028a16cc39b26b4a02f36c24c41b26e"><div class="ttname"><a href="structopendal__result__read.html#a1028a16cc39b26b4a02f36c24c41b26e">opendal_result_read::data</a></div><div class="ttdeci">struct opendal_bytes data</div><div class="ttdef"><b>Definition</b> opendal.h:284</div></div>
<div class="ttc" id="astructopendal__result__read_html_a6cd0e4e83ed4509856de0d1e6b83e2f2"><div class="ttname"><a href="structopendal__result__read.html#a6cd0e4e83ed4509856de0d1e6b83e2f2">opendal_result_read::error</a></div><div class="ttdeci">struct opendal_error * error</div><div class="ttdef"><b>Definition</b> opendal.h:288</div></div>
</div><!-- fragment --><p>For more examples, please refer to <code>./examples</code></p>
<h1><a class="anchor" id="autotoc_md48"></a>
Prerequisites</h1>
<p>To build OpenDAL C binding, the following is all you need:</p>
<ul>
<li>A compiler that supports <b>C11</b> and <b>C++14</b>, <em>e.g.</em> clang and gcc</li>
<li>To format the code, you need to install <b>clang-format</b><ul>
<li>The <code><a class="el" href="opendal_8h.html">opendal.h</a></code> is not formatted by hands when you contribute, please do not format the file. <b>Use <code>make format</code> only.</b></li>
<li>If your contribution is related to the files under <code>./tests</code>, you may format it before submitting your pull request. But notice that different versions of <code>clang-format</code> may format the files differently.</li>
</ul>
</li>
<li>(optional) <b>Doxygen</b> need to be installed to generate documentations.</li>
</ul>
<p>For Ubuntu and Debian:</p>
<div class="fragment"><div class="line"># install C/C++ toolchain</div>
<div class="line">sudo apt install -y build-essential</div>
<div class="line"> </div>
<div class="line"># install clang-format</div>
<div class="line">sudo apt install clang-format</div>
<div class="line"> </div>
<div class="line"># install and build GTest library under /usr/lib and softlink to /usr/local/lib</div>
<div class="line">sudo apt-get install libgtest-dev</div>
<div class="line"> </div>
<div class="line"># install CMake</div>
<div class="line">sudo apt-get install cmake</div>
<div class="line"> </div>
<div class="line"># install Rust</div>
<div class="line">curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md49"></a>
Makefile</h1>
<ul>
<li><p class="startli">To <b>build the library and header file</b>.</p>
<div class="fragment"><div class="line">mkdir -p build &amp;&amp; cd build</div>
<div class="line">cmake ..</div>
<div class="line">make</div>
</div><!-- fragment --><ul>
<li>The header file <code><a class="el" href="opendal_8h.html">opendal.h</a></code> is under <code>./include</code></li>
<li>The library is under <code>../../target/debug</code> after building.</li>
<li>use <code>FEATURES</code> to enable services, like <code>cmake .. -DFEATURES="opendal/services-memory,opendal/services-fs"</code></li>
</ul>
</li>
<li><p class="startli">To <b>clean</b> the build results.</p>
<div class="fragment"><div class="line">cargo clean</div>
<div class="line">cd build &amp;&amp; make clean</div>
</div><!-- fragment --></li>
<li><p class="startli">To build and run the <b>tests</b>. (Note that you need to install Valgrind and GTest)</p>
<div class="fragment"><div class="line">cd build</div>
<div class="line">make tests &amp;&amp; ./tests</div>
</div><!-- fragment --></li>
<li><p class="startli">To build the <b>examples</b></p>
<div class="fragment"><div class="line">cd build</div>
<div class="line">make basic error_handle</div>
</div><!-- fragment --></li>
</ul>
<h1><a class="anchor" id="autotoc_md50"></a>
Documentation</h1>
<p>The documentation index page source is under <code>./docs/doxygen/html/index.html</code>. If you want to build the documentations yourself, you could use</p>
<div class="fragment"><div class="line"># this requires you to install doxygen</div>
<div class="line">make doc</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md51"></a>
Used by</h1>
<p>Check out the users list for more details on who is using OpenDAL.</p>
<h1><a class="anchor" id="autotoc_md52"></a>
License and Trademarks</h1>
<p>Licensed under the Apache License, Version 2.0: <a href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></p>
<p>Apache OpenDAL, OpenDAL, and Apache are either registered trademarks or trademarks of the Apache Software Foundation. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"><address class="footer"><small>
Generated by&nbsp;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"></a> 1.9.8
</small></address>


</body></html>